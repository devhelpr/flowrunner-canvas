/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["flowcanvaswebpackJsonpPlugin"] = self["flowcanvaswebpackJsonpPlugin"] || []).push([["src_components_html-plugins_debug-node_tsx"],{

/***/ "./src/components/html-plugins/debug-node.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"DebugNodeHtmlPlugin\": () => (/* binding */ DebugNodeHtmlPlugin)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./node_modules/react/index.js\");\n/* harmony import */ var _visualizers_number__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./src/components/html-plugins/visualizers/number.tsx\");\n/* harmony import */ var _visualizers_color__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./src/components/html-plugins/visualizers/color.tsx\");\n/* harmony import */ var _visualizers_text__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./src/components/html-plugins/visualizers/text.tsx\");\n/* harmony import */ var _visualizers_list__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./src/components/html-plugins/visualizers/list.tsx\");\n/* harmony import */ var _state_selected_node_state__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./src/state/selected-node-state.ts\");\n/* harmony import */ var _devhelpr_expressionrunner__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./node_modules/@devhelpr/expressionrunner/dist/expressionrunner.esm.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./node_modules/uuid/index.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_7__);\n\n\n\n\n\n\n\n\n\n\nconst XYCanvas = react__WEBPACK_IMPORTED_MODULE_0__.lazy(() => Promise.all(/* import() */[__webpack_require__.e(\"vendors-node_modules_react-konva_es_ReactKonva_js\"), __webpack_require__.e(\"src_components_html-plugins_visualizers_xy-canvas_tsx\")]).then(__webpack_require__.bind(__webpack_require__, \"./src/components/html-plugins/visualizers/xy-canvas.tsx\")).then(({ XYCanvas }) => ({ default: XYCanvas })));\nconst AnimatedGridCanvas = react__WEBPACK_IMPORTED_MODULE_0__.lazy(() => Promise.all(/* import() */[__webpack_require__.e(\"vendors-node_modules_react-konva_es_ReactKonva_js\"), __webpack_require__.e(\"src_components_html-plugins_visualizers_animated-grid-canvas_tsx\")]).then(__webpack_require__.bind(__webpack_require__, \"./src/components/html-plugins/visualizers/animated-grid-canvas.tsx\")).then(({ AnimatedGridCanvas }) => ({ default: AnimatedGridCanvas })));\nconst GridCanvas = react__WEBPACK_IMPORTED_MODULE_0__.lazy(() => Promise.all(/* import() */[__webpack_require__.e(\"vendors-node_modules_react-konva_es_ReactKonva_js\"), __webpack_require__.e(\"src_components_html-plugins_visualizers_grid-canvas_tsx\")]).then(__webpack_require__.bind(__webpack_require__, \"./src/components/html-plugins/visualizers/grid-canvas.tsx\")).then(({ GridCanvas }) => ({ default: GridCanvas })));\nconst RichText = react__WEBPACK_IMPORTED_MODULE_0__.lazy(() => Promise.all(/* import() */[__webpack_require__.e(\"vendors-node_modules_dompurify_dist_purify_js\"), __webpack_require__.e(\"src_components_html-plugins_visualizers_richtext_tsx\")]).then(__webpack_require__.bind(__webpack_require__, \"./src/components/html-plugins/visualizers/richtext.tsx\")).then(({ RichText }) => ({ default: RichText })));\n\nconst uuidV4 = uuid__WEBPACK_IMPORTED_MODULE_7__.v4;\nconst DebugNodeHtmlPlugin = (props) => {\n    const [receivedPayload, setReceivedPayload] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [expressionTree, setExpressionTree] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(undefined);\n    const selectedNode = (0,_state_selected_node_state__WEBPACK_IMPORTED_MODULE_5__.useSelectedNodeStore)();\n    const observableId = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(uuidV4());\n    const unmounted = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    const timer = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(undefined);\n    const lastTime = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(undefined);\n    const receivedPayloads = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n        unmounted.current = false;\n        props.flowrunnerConnector.registerFlowNodeObserver(props.node.name, observableId.current, receivePayloadFromNode);\n        if (props.node.visibilityCondition &&\n            props.node.visibilityCondition !== \"\") {\n            setExpressionTree((0,_devhelpr_expressionrunner__WEBPACK_IMPORTED_MODULE_6__.createExpressionTree)(props.node.visibilityCondition));\n        }\n        return () => {\n            props.flowrunnerConnector.unregisterFlowNodeObserver(props.node.name, observableId.current);\n            unmounted.current = true;\n            if (timer.current) {\n                clearTimeout(timer.current);\n                timer.current = undefined;\n            }\n        };\n    }, []);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n        if (props.node.visibilityCondition &&\n            props.node.visibilityCondition &&\n            props.node.visibilityCondition !== \"\") {\n            setExpressionTree((0,_devhelpr_expressionrunner__WEBPACK_IMPORTED_MODULE_6__.createExpressionTree)(props.node.visibilityCondition));\n        }\n        props.flowrunnerConnector.registerFlowNodeObserver(props.node.name, observableId.current, receivePayloadFromNode);\n        return () => {\n            props.flowrunnerConnector.unregisterFlowNodeObserver(props.node.name, observableId.current);\n        };\n    }, [props.node]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n        props.flowrunnerConnector.registerFlowNodeObserver(props.node.name, observableId.current, receivePayloadFromNode);\n        return () => {\n            props.flowrunnerConnector.unregisterFlowNodeObserver(props.node.name, observableId.current);\n        };\n    }, [props.flow]);\n    const getWidth = () => {\n        return;\n    };\n    const getHeight = () => {\n        return;\n    };\n    const receivePayloadFromNode = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((payload) => {\n        if (unmounted.current) {\n            return;\n        }\n        if (!!payload.isDebugCommand) {\n            if (payload.debugCommand === \"resetPayloads\") {\n                if (receivedPayloads.current.length > 0) {\n                    receivedPayloads.current = [];\n                    setReceivedPayload([]);\n                }\n            }\n            return;\n        }\n        let newReceivedPayloads = [...receivedPayloads.current];\n        newReceivedPayloads.push({ ...payload });\n        if (newReceivedPayloads.length > 1) {\n            newReceivedPayloads = newReceivedPayloads.slice(Math.max(newReceivedPayloads.length - (props.node.maxPayloads || 1), 0));\n        }\n        receivedPayloads.current = newReceivedPayloads;\n        if (!lastTime.current || performance.now() > lastTime.current + 30) {\n            lastTime.current = performance.now();\n            if (timer.current) {\n                clearTimeout(timer.current);\n                timer.current = undefined;\n            }\n            setReceivedPayload(newReceivedPayloads);\n        }\n        else {\n            if (timer.current) {\n                clearTimeout(timer.current);\n                timer.current = undefined;\n            }\n            timer.current = setTimeout(() => {\n                timer.current = undefined;\n                setReceivedPayload(receivedPayloads.current);\n            }, 30);\n        }\n        return;\n    }, [props.flow, props.node]);\n    let visualizer = react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null);\n    let additionalCssClass = \"\";\n    let visible = true;\n    if (props.node.visibilityCondition && expressionTree) {\n        let payload = receivedPayload.length > 0 ? receivedPayload[receivedPayload.length - 1] : {};\n        const result = (0,_devhelpr_expressionrunner__WEBPACK_IMPORTED_MODULE_6__.executeExpressionTree)(expressionTree, payload);\n        console.log(\"executeExpressionTree\", result, result == 1, !(result == 1) && expressionTree &&\n            props.flowrunnerConnector.flowView != \"uiview\", payload);\n        visible = result == 1;\n    }\n    if (props.flowrunnerConnector.flowView == \"uiview\" && expressionTree) {\n        if (!visible) {\n            return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null);\n        }\n    }\n    if (receivedPayload.length == 0) {\n        additionalCssClass = \"html-plugin-node__h-100\";\n        visualizer = react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { style: {\n                backgroundColor: \"#ffffff\"\n            } });\n    }\n    if (props.node.visualizer == \"children\") {\n        const childrenWithProps = react__WEBPACK_IMPORTED_MODULE_0__.Children.map(props.children, child => {\n            if ((0,react__WEBPACK_IMPORTED_MODULE_0__.isValidElement)(child)) {\n                return (0,react__WEBPACK_IMPORTED_MODULE_0__.cloneElement)(child, {\n                    nodeName: props.node.name,\n                    payload: receivedPayload.length > 0 ? receivedPayload[receivedPayload.length - 1] : {}\n                });\n            }\n            return child;\n        });\n        return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, childrenWithProps);\n    }\n    else if (props.node.visualizer == \"number\") {\n        visualizer = react__WEBPACK_IMPORTED_MODULE_0__.createElement(_visualizers_number__WEBPACK_IMPORTED_MODULE_1__.Number, { node: props.node, payloads: receivedPayload });\n    }\n    else if (props.node.visualizer == \"text\") {\n        visualizer = react__WEBPACK_IMPORTED_MODULE_0__.createElement(_visualizers_text__WEBPACK_IMPORTED_MODULE_3__.Text, { node: props.node, payloads: receivedPayload });\n    }\n    else if (props.node.visualizer == \"list\") {\n        visualizer = react__WEBPACK_IMPORTED_MODULE_0__.createElement(_visualizers_list__WEBPACK_IMPORTED_MODULE_4__.List, { node: props.node, payloads: receivedPayload });\n    }\n    else if (props.node.visualizer == \"color\") {\n        additionalCssClass = \"html-plugin-node__h-100\";\n        visualizer = react__WEBPACK_IMPORTED_MODULE_0__.createElement(_visualizers_color__WEBPACK_IMPORTED_MODULE_2__.Color, { node: props.node, payloads: receivedPayload });\n    }\n    else if (props.node.visualizer == \"richtext\") {\n        additionalCssClass = \"html-plugin-node__h-100\";\n        visualizer = react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Suspense, { fallback: react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", null, \"Loading...\") },\n            react__WEBPACK_IMPORTED_MODULE_0__.createElement(RichText, { node: props.node, payloads: receivedPayload }));\n    }\n    else if (props.node.visualizer == \"gridcanvas\") {\n        additionalCssClass = \"html-plugin-node__h-100\";\n        visualizer = react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Suspense, { fallback: react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", null, \"Loading...\") },\n            react__WEBPACK_IMPORTED_MODULE_0__.createElement(GridCanvas, { node: props.node, payloads: receivedPayload }));\n    }\n    else if (props.node.visualizer == \"animatedgridcanvas\") {\n        additionalCssClass = \"html-plugin-node__h-100\";\n        visualizer = react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Suspense, { fallback: react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", null, \"Loading...\") },\n            react__WEBPACK_IMPORTED_MODULE_0__.createElement(AnimatedGridCanvas, { node: props.node, payloads: receivedPayload }));\n    }\n    else if (props.node.visualizer == \"xycanvas\") {\n        additionalCssClass = \"html-plugin-node__h-100\";\n        visualizer = react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Suspense, { fallback: react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", null, \"Loading...\") },\n            react__WEBPACK_IMPORTED_MODULE_0__.createElement(XYCanvas, { flowrunnerConnector: props.flowrunnerConnector, selectedNode: selectedNode, node: props.node, payloads: receivedPayload }));\n    }\n    else {\n        const payload = receivedPayload[receivedPayload.length - 1];\n        if (payload && payload.debugId) {\n            delete payload.debugId;\n        }\n        visualizer = react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"w-100 h-auto\" }, payload ? JSON.stringify(payload, null, 2) : \"\");\n    }\n    return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null,\n        !visible && expressionTree &&\n            props.flowrunnerConnector.flowView != \"uiview\" && react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"html-plugin-node__visibility fas fa-eye-slash\" }),\n        react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"html-plugin-node html-plugin-node--wrap html-plugin-node--\" + props.node.visualizer + additionalCssClass, style: {\n                backgroundColor: \"white\"\n            } }, visualizer));\n};\n\n\n//# sourceURL=webpack://@devhelpr/flowrunner-canvas/./src/components/html-plugins/debug-node.tsx?");

/***/ }),

/***/ "./src/components/html-plugins/visualizers/color.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Color\": () => (/* binding */ Color)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./node_modules/react/index.js\");\n\nclass Color extends react__WEBPACK_IMPORTED_MODULE_0__.Component {\n    constructor() {\n        super(...arguments);\n        this.state = {};\n    }\n    render() {\n        let background = \"#ffffff\";\n        if (this.props.payloads.length > 0) {\n            let payload = this.props.payloads[this.props.payloads.length - 1];\n            if (payload.color !== undefined) {\n                background = payload.color;\n            }\n        }\n        return react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"h-100 w-100\", style: {\n                backgroundColor: background,\n                minHeight: \"100px\",\n                transition: \"background-color ease-in-out .1s\"\n            } });\n    }\n}\n\n\n//# sourceURL=webpack://@devhelpr/flowrunner-canvas/./src/components/html-plugins/visualizers/color.tsx?");

/***/ }),

/***/ "./src/components/html-plugins/visualizers/list.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"List\": () => (/* binding */ List)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./node_modules/react/index.js\");\n\nclass List extends react__WEBPACK_IMPORTED_MODULE_0__.Component {\n    constructor() {\n        super(...arguments);\n        this.state = {};\n    }\n    render() {\n        let payload;\n        if (this.props.payloads.length > 0) {\n            payload = this.props.payloads[this.props.payloads.length - 1];\n        }\n        const node = this.props.node;\n        return react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"h-auto\" }, node && node.list && node.list.map((listItem, index) => {\n            return react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { key: \"index-\" + index, className: \"mb-1\" },\n                react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"label\", { className: \"font-weight-bolder mb-0\" }, listItem.label),\n                react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", null, payload && payload[listItem.propertyName]));\n        }));\n    }\n}\n\n\n//# sourceURL=webpack://@devhelpr/flowrunner-canvas/./src/components/html-plugins/visualizers/list.tsx?");

/***/ }),

/***/ "./src/components/html-plugins/visualizers/number.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Number\": () => (/* binding */ Number)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./node_modules/react/index.js\");\n\nclass Number extends react__WEBPACK_IMPORTED_MODULE_0__.Component {\n    constructor() {\n        super(...arguments);\n        this.state = {};\n    }\n    render() {\n        let data = \"\";\n        if (this.props.payloads.length > 0) {\n            let payload = this.props.payloads[this.props.payloads.length - 1];\n            if (this.props.node.propertyName && payload[this.props.node.propertyName]) {\n                if (this.props.node.format === \"toFixed\") {\n                    try {\n                        data = payload[this.props.node.propertyName].toFixed(this.props.node.fixed || 0);\n                        if (this.props.node.decimalSeparator !== undefined) {\n                            data = data.replace(\".\", this.props.node.decimalSeparator || \".\");\n                        }\n                    }\n                    catch (error) {\n                        data = \"\";\n                    }\n                }\n                else {\n                    data = payload[this.props.node.propertyName];\n                }\n            }\n        }\n        let afterLabel = \"\";\n        if (this.props.node.afterLabel) {\n            afterLabel = this.props.node.afterLabel;\n        }\n        return react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"h-auto\" },\n            react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"strong\", { className: \"h1 font-weight-bolder\" },\n                data,\n                afterLabel));\n    }\n}\n\n\n//# sourceURL=webpack://@devhelpr/flowrunner-canvas/./src/components/html-plugins/visualizers/number.tsx?");

/***/ }),

/***/ "./src/components/html-plugins/visualizers/text.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Text\": () => (/* binding */ Text)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./node_modules/react/index.js\");\n/* harmony import */ var _helpers_replace_values__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./src/helpers/replace-values.ts\");\n\n\nclass Element extends react__WEBPACK_IMPORTED_MODULE_0__.Component {\n    render() {\n        return react__WEBPACK_IMPORTED_MODULE_0__.createElement(this.props.tag, {\n            className: this.props.cssClassName\n        }, this.props.value);\n    }\n}\nclass Text extends react__WEBPACK_IMPORTED_MODULE_0__.Component {\n    constructor() {\n        super(...arguments);\n        this.state = {};\n    }\n    render() {\n        let data = \"\";\n        if (this.props.payloads.length > 0) {\n            let payload = this.props.payloads[this.props.payloads.length - 1];\n            if (this.props.node.propertyName && payload[this.props.node.propertyName]) {\n                data = payload[this.props.node.propertyName];\n            }\n            else if (!!this.props.node.replaceValues) {\n                data = (0,_helpers_replace_values__WEBPACK_IMPORTED_MODULE_1__.replaceValues)(this.props.node.template, payload);\n            }\n        }\n        let afterLabel = \"\";\n        if (this.props.node.afterLabel) {\n            afterLabel = this.props.node.afterLabel;\n        }\n        if (!!this.props.node.asElement) {\n            return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Element, { cssClassName: this.props.node.cssClassName, tag: this.props.node.htmlElement, value: data + afterLabel });\n        }\n        return react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"h-auto d-flex align-items-center\" }, this.props.node.cssClassName ? react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { className: this.props.node.cssClassName },\n            data,\n            afterLabel) :\n            react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"strong\", { className: \"h1 font-weight-bolder text-wrap\" + this.props.node.cssClassName || 0 },\n                data,\n                afterLabel));\n    }\n}\n\n\n//# sourceURL=webpack://@devhelpr/flowrunner-canvas/./src/components/html-plugins/visualizers/text.tsx?");

/***/ })

}]);
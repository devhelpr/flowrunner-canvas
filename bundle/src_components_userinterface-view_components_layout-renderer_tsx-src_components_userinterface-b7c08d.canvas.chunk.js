/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["flowcanvaswebpackJsonpPlugin"] = self["flowcanvaswebpackJsonpPlugin"] || []).push([["src_components_userinterface-view_components_layout-renderer_tsx-src_components_userinterface-b7c08d"],{

/***/ "./src/components/flow/index.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Flow\": () => (/* binding */ Flow)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./node_modules/react/index.js\");\n\r\n\r\nconst Flow = (props) => {\r\n    const [internalFlow, setInternalFlow] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\r\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\r\n        console.log(\"FLOW in flow component useEffect\", performance.now());\r\n        if (internalFlow.length != props.flow.length) {\r\n            setInternalFlow(props.flow);\r\n        }\r\n        else {\r\n            let changed = false;\r\n            let changedNode = \"\";\r\n            let changedNodeProperty = \"\";\r\n            let properties = [\"x\", \"y\", \"xstart\", \"ystart\", \"xend\", \"yend\"];\r\n            let perfstart = performance.now();\r\n            props.flow.map((node, index) => {\r\n                if (changed) {\r\n                    return true;\r\n                }\r\n                const internalNode = internalFlow[index];\r\n                {\r\n                    let nodeKeys = Object.keys(node);\r\n                    let internalNodeKeys = Object.keys(internalNode);\r\n                    {\r\n                        nodeKeys.map((nodeProperty) => {\r\n                            if (changed) {\r\n                                return;\r\n                            }\r\n                            if (properties.indexOf(nodeProperty) >= 0) {\r\n                                return;\r\n                            }\r\n                            if (node[nodeProperty] !== internalNode[nodeProperty]) {\r\n                                changed = true;\r\n                                changedNode = node.name;\r\n                                changedNodeProperty = nodeProperty;\r\n                            }\r\n                        });\r\n                        if (!changed) {\r\n                            internalNodeKeys.map((internalNodeProperty) => {\r\n                                if (changed) {\r\n                                    return;\r\n                                }\r\n                                if (properties.indexOf(internalNodeProperty) >= 0) {\r\n                                    return;\r\n                                }\r\n                                if (node[internalNodeProperty] !== internalNode[internalNodeProperty]) {\r\n                                    changed = true;\r\n                                    changedNode = node.name;\r\n                                    changedNodeProperty = internalNodeProperty;\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            console.log(\"flow diffing time\", (performance.now() - perfstart) + \"ms\");\r\n            if (changed || !!props.flowrunnerConnector.forcePushToFlowRunner) {\r\n                console.log(\"flow changed\", changedNode, changedNodeProperty, props.flowrunnerConnector.forcePushToFlowRunner, props.flow);\r\n                props.flowrunnerConnector.forcePushToFlowRunner = false;\r\n                setInternalFlow(props.flow);\r\n            }\r\n        }\r\n    }, [props.flow, props.flowId]);\r\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\r\n        let perfstart = performance.now();\r\n        if (!internalFlow) {\r\n            return;\r\n        }\r\n        props.flowrunnerConnector.pushFlowToFlowrunner(internalFlow, true, props.flowId);\r\n        console.log(\"flow pushFlowToFlowrunner\", (performance.now() - perfstart) + \"ms\");\r\n    }, [internalFlow]);\r\n    return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null);\r\n};\r\n\n\n//# sourceURL=webpack://@devhelpr/flowrunner-canvas/./src/components/flow/index.tsx?");

/***/ }),

/***/ "./src/components/userinterface-view/components/layout-renderer.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"renderFlowNode\": () => (/* binding */ renderFlowNode),\n/* harmony export */   \"renderLayoutType\": () => (/* binding */ renderLayoutType)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./node_modules/react/index.js\");\n/* harmony import */ var _helpers_flow_to_canvas__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./src/helpers/flow-to-canvas.ts\");\n/* harmony import */ var _helpers_shape_settings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./src/helpers/shape-settings.ts\");\n/* harmony import */ var _multi_form__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./src/components/userinterface-view/components/multi-form.tsx\");\n\r\n\r\n\r\n\r\nconst renderFlowNode = (node, rootLayout, isInEditMode = false) => {\r\n    if (!!node.hideFromUI) {\r\n        return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null);\r\n    }\r\n    const onShowNodeSettings = () => {\r\n    };\r\n    let shapeType = _helpers_flow_to_canvas__WEBPACK_IMPORTED_MODULE_1__.FlowToCanvas.getShapeType(node.shapeType, node.taskType, node.isStartEnd);\r\n    const settings = _helpers_shape_settings__WEBPACK_IMPORTED_MODULE_2__.ShapeSettings.getShapeSettings(node.taskType, node);\r\n    if (shapeType === \"Html\" && !!settings.hasUI) {\r\n        const nodeClone = { ...node };\r\n        const isSelected = false;\r\n        nodeClone.htmlPlugin = node.htmlPlugin || settings.htmlPlugin || \"\";\r\n        let width = undefined;\r\n        let height = undefined;\r\n        if (rootLayout.context.getNodeInstance) {\r\n            const instance = rootLayout.context.getNodeInstance(node, rootLayout.context.flowrunnerConnector, rootLayout.context.flow, settings);\r\n            if (instance) {\r\n                if (instance.getWidth && instance.getHeight) {\r\n                    width = instance.getWidth(node);\r\n                    height = instance.getHeight(node);\r\n                }\r\n            }\r\n        }\r\n        if (settings.uiComponent && settings.uiComponent == \"MultiForm\") {\r\n            return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_multi_form__WEBPACK_IMPORTED_MODULE_3__.MultiForm, { node: nodeClone, settings: settings, renderHtmlNode: rootLayout.context.renderHtmlNode, getNodeInstance: rootLayout.context.getNodeInstance, flowrunnerConnector: rootLayout.context.flowrunnerConnector });\r\n        }\r\n        return react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { style: {\r\n                width: (width || node.width || 250) + \"px\",\r\n                minHeight: (height || node.height || 250) + \"px\",\r\n                height: \"auto\",\r\n                opacity: 1,\r\n                position: \"relative\"\r\n            }, id: node.name, \"data-task\": node.taskType, \"data-node\": node.name, \"data-html-plugin\": nodeClone.htmlPlugin, \"data-node-type\": node.taskType, \"data-visualizer\": nodeClone.visualizer || \"\", \"data-x\": node.x, \"data-y\": node.y, className: \"canvas__html-shape untouched\" },\r\n            !!isInEditMode && settings && !!settings.hasConfigMenu &&\r\n                react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"\" },  false && 0),\r\n            react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"canvas__html-shape-body\" }, rootLayout.context.renderHtmlNode && rootLayout.context.renderHtmlNode(nodeClone, rootLayout.context.flowrunnerConnector, rootLayout.context.flow, settings)));\r\n    }\r\n};\r\nconst renderLayoutType = (layoutBlock, isInForm, form, setLayoutVisibleState, rootLayout) => {\r\n    if (layoutBlock.type === \"layout2columns\") {\r\n        if (!layoutBlock.layout && layoutBlock.layout.length !== 2) {\r\n            return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null);\r\n        }\r\n        return react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"layout-container__layout2columns\" },\r\n            react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"row\" },\r\n                react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"col-12 col-md-6\" },\r\n                    react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"ui-view-layout__container-row layout-container__layout2columns-col-1\" }, layoutBlock.layout[0].map((layout, index) => {\r\n                        return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, { key: \"layout-\" + index },\r\n                            react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"ui-view-layout__container d-flex flex-row justify-content-center\" }, renderLayoutType(layout, isInForm, form, setLayoutVisibleState, rootLayout)));\r\n                    }))),\r\n                react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"col-12 col-md-6 \" },\r\n                    react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"ui-view-layout__container-row layout-container__layout2columns-col-2\" }, layoutBlock.layout[1].map((layout, index) => {\r\n                        return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, { key: \"layout-\" + index },\r\n                            react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"ui-view-layout__container d-flex flex-row justify-content-center\" }, renderLayoutType(layout, isInForm, form, setLayoutVisibleState, rootLayout)));\r\n                    })))));\r\n    }\r\n    else if (layoutBlock.type === \"layout\") {\r\n        if (!layoutBlock.layout) {\r\n            return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null);\r\n        }\r\n        return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null,\r\n            react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"row\" },\r\n                react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"col-12 ui-view-layout__container-row\" }, layoutBlock.layout.map((layout, index) => {\r\n                    return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, { key: \"layout-\" + index },\r\n                        react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"ui-view-layout__container d-flex flex-row justify-content-center\" }, renderLayoutType(layout, isInForm, form, setLayoutVisibleState, rootLayout)));\r\n                }))));\r\n    }\r\n    else if (layoutBlock.type === \"element\") {\r\n        return react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", null, layoutBlock.title || \"\");\r\n    }\r\n    else if (layoutBlock.type === \"flowNode\") {\r\n        const node = rootLayout.context.flowHash[layoutBlock.subtitle];\r\n        if (node) {\r\n            return renderFlowNode(node, rootLayout, false);\r\n        }\r\n        return null;\r\n    }\r\n    return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null);\r\n};\r\n\n\n//# sourceURL=webpack://@devhelpr/flowrunner-canvas/./src/components/userinterface-view/components/layout-renderer.tsx?");

/***/ }),

/***/ "./src/components/userinterface-view/components/multi-form.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MultiForm\": () => (/* binding */ MultiForm)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./node_modules/react/index.js\");\n/* harmony import */ var _flow_connector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./src/flow-connector/index.ts\");\n/* harmony import */ var _userinterface_view_multi_form_view__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./src/components/userinterface-view/multi-form-view.tsx\");\n/* harmony import */ var _flow_agent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./src/flow-agent.ts\");\n\r\n\r\n\r\n\r\n\r\nconst MultiForm = (props) => {\r\n    var _a, _b, _c, _d;\r\n    const [formStep, setFormStep] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\r\n    const [flowEnabled, setFlowEnabled] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\r\n    const workerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\r\n    const flowrunnerConnector = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\r\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\r\n        workerRef.current = (0,_flow_agent__WEBPACK_IMPORTED_MODULE_3__.getFlowAgent)();\r\n        workerRef.current.postMessage(\"worker\", {\r\n            command: 'init'\r\n        });\r\n        flowrunnerConnector.current = new _flow_connector__WEBPACK_IMPORTED_MODULE_1__.FlowConnector();\r\n        flowrunnerConnector.current.registerWorker(workerRef.current);\r\n        setFlowEnabled(true);\r\n        return () => {\r\n            if (workerRef.current) {\r\n                workerRef.current.terminate();\r\n                workerRef.current = null;\r\n            }\r\n        };\r\n    }, [props.node, formStep]);\r\n    const onNextStep = (event) => {\r\n        var _a, _b;\r\n        event.preventDefault();\r\n        if (formStep < ((_b = (_a = props.node) === null || _a === void 0 ? void 0 : _a.formFlows) === null || _b === void 0 ? void 0 : _b.length) - 1) {\r\n            setFlowEnabled(false);\r\n            setFormStep(formStep + 1);\r\n        }\r\n        return false;\r\n    };\r\n    const onPreviousStep = (event) => {\r\n        event.preventDefault();\r\n        if (formStep > 0) {\r\n            setFlowEnabled(false);\r\n            setFormStep(formStep - 1);\r\n        }\r\n        return false;\r\n    };\r\n    return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null,\r\n        react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"p\", null,\r\n            \"MultiForm form-step: \",\r\n            formStep + 1,\r\n            \" / \", (_b = (_a = props.node) === null || _a === void 0 ? void 0 : _a.formFlows) === null || _b === void 0 ? void 0 :\r\n            _b.length),\r\n        react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", null, flowEnabled && props.node && props.node.formFlows && props.node.formFlows.length > 0 &&\r\n            react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"card\" },\r\n                react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"card-body\" },\r\n                    react__WEBPACK_IMPORTED_MODULE_0__.createElement(_userinterface_view_multi_form_view__WEBPACK_IMPORTED_MODULE_2__.MultiFormView, { renderHtmlNode: props.renderHtmlNode, getNodeInstance: props.getNodeInstance, flowrunnerConnector: flowrunnerConnector.current, flowId: props.node.formFlows[formStep].flowId })))),\r\n        react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"row mt-2\" },\r\n            formStep > 0 &&\r\n                react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"col-auto\" },\r\n                    react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { className: \"btn btn-outline-primary\", onClick: onPreviousStep }, \"Previous\")),\r\n            formStep < ((_d = (_c = props.node) === null || _c === void 0 ? void 0 : _c.formFlows) === null || _d === void 0 ? void 0 : _d.length) - 1 &&\r\n                react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"col-auto\" },\r\n                    react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { className: \"btn btn-primary\", onClick: onNextStep }, \"Next\"))));\r\n};\r\n\n\n//# sourceURL=webpack://@devhelpr/flowrunner-canvas/./src/components/userinterface-view/components/multi-form.tsx?");

/***/ }),

/***/ "./src/components/userinterface-view/multi-form-view.tsx":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MultiFormView\": () => (/* binding */ MultiFormView)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./node_modules/react/index.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./node_modules/uuid/index.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _devhelpr_layoutrunner__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./node_modules/@devhelpr/layoutrunner/dist/layoutrunner.esm.js\");\n/* harmony import */ var _components_layout_renderer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./src/components/userinterface-view/components/layout-renderer.tsx\");\n/* harmony import */ var _flow__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./src/components/flow/index.tsx\");\n/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./node_modules/cross-fetch/dist/browser-ponyfill.js\");\n/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(cross_fetch__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _state_flow_state__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./src/state/flow-state.ts\");\n/* harmony import */ var _state_layout_state__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./src/state/layout-state.ts\");\n/* harmony import */ var _state_canvas_mode_state__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./src/state/canvas-mode-state.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst uuidV4 = uuid__WEBPACK_IMPORTED_MODULE_1__.v4;\r\nconst MultiFormView = (props) => {\r\n    const [flowName, setFlowName] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\r\n    const [flowHash, setFlowHash] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\r\n    const [titleBarBackgroundcolor, setTitleBarBackgroundcolor] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\r\n    const [titleBarTitle, setTitleBarTitle] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\r\n    const [titleBarColor, setTitleBarColor] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\r\n    const [titleBarFont, setTitleBarFont] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\r\n    const [titleBarFontSize, setTitleBarFontSize] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\r\n    const [titleBarFontWeight, setTitleBarFontWeight] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\r\n    const [layoutTree, setLayoutTree] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\r\n    const [isFlowLoaded, setIsFlowLoaded] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\r\n    const unmounted = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\r\n    const layoutTreeAsString = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(\"\");\r\n    const flow = (0,_state_flow_state__WEBPACK_IMPORTED_MODULE_6__.useFlowForMultiFormStore)();\r\n    const canvasMode = (0,_state_canvas_mode_state__WEBPACK_IMPORTED_MODULE_8__.useCanvasModeStateForMultiFormStore)();\r\n    const layout = (0,_state_layout_state__WEBPACK_IMPORTED_MODULE_7__.useLayoutForMultiFormStore)();\r\n    let nodesStateLocal = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({});\r\n    let touchedNodesLocal = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({});\r\n    const getLayoutNodeFromTree = (level, index, subIndex) => {\r\n        let treeHashKey = level + \".\" + index + \".\" + subIndex;\r\n        if (layoutTreeAsString.current && layoutTreeAsString.current[treeHashKey]) {\r\n            let tree = layoutTreeAsString.current[treeHashKey];\r\n            let layoutTreeNode = [];\r\n            tree.map((layoutBlock, treeIndex) => {\r\n                if (layoutBlock.title == \"element\") {\r\n                    layoutTreeNode.push({\r\n                        type: \"element\",\r\n                        title: layoutBlock.title,\r\n                        subtitle: layoutBlock.subtitle || \"\"\r\n                    });\r\n                }\r\n                else if (layoutBlock.title == \"flowNode\") {\r\n                    layoutTreeNode.push({\r\n                        type: \"flowNode\",\r\n                        title: layoutBlock.title,\r\n                        subtitle: layoutBlock.subtitle || \"\",\r\n                        name: layoutBlock.subtitle || \"\"\r\n                    });\r\n                }\r\n                else if (layoutBlock.title == \"layout2columns\") {\r\n                    layoutTreeNode.push({\r\n                        type: \"layout2columns\",\r\n                        title: layoutBlock.title,\r\n                        layout: [getLayoutNodeFromTree(level + 1, treeIndex, 0),\r\n                            getLayoutNodeFromTree(level + 1, treeIndex, 1),\r\n                        ]\r\n                    });\r\n                }\r\n                else {\r\n                    layoutTreeNode.push({\r\n                        type: \"layout\",\r\n                        title: layoutBlock.title,\r\n                        layout: getLayoutNodeFromTree(level + 1, treeIndex, 0)\r\n                    });\r\n                }\r\n            });\r\n            return layoutTreeNode;\r\n        }\r\n        return [];\r\n    };\r\n    const screenUICallback = (command) => {\r\n        if (command && command.action == \"SendScreen\" && command.payload) {\r\n            const payload = command.payload;\r\n            if (payload.titleBarBackgroundcolor) {\r\n                setTitleBarBackgroundcolor(payload.titleBarBackgroundcolor);\r\n            }\r\n            if (payload.titleBarColor) {\r\n                setTitleBarColor(payload.titleBarColor);\r\n            }\r\n            if (payload.titleBarFont) {\r\n                setTitleBarFont(payload.titleBarFont);\r\n            }\r\n            if (payload.titleBarFontSize) {\r\n                setTitleBarFontSize(payload.titleBarFontSize);\r\n            }\r\n            if (payload.titleBarFontWeight) {\r\n                setTitleBarFontWeight(payload.titleBarFontWeight);\r\n            }\r\n            if (payload.titleBarFontWeight) {\r\n                setTitleBarFontWeight(payload.titleBarFontWeight);\r\n            }\r\n            if (payload.titleBarTitle) {\r\n                setTitleBarTitle(payload.titleBarTitle);\r\n            }\r\n        }\r\n    };\r\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\r\n        props.flowrunnerConnector.registerScreenUICallback(screenUICallback);\r\n        props.flowrunnerConnector.unregisterNodeStateObserver(\"canvas\");\r\n        props.flowrunnerConnector.registerNodeStateObserver(\"canvas\", nodeStateObserver);\r\n        const paths = location.pathname.split(\"/\");\r\n        if (props.flowrunnerConnector.hasStorageProvider) {\r\n            loadFlow(\"flow\");\r\n        }\r\n        else if (props.flowId !== undefined && props.flowId !== \"\") {\r\n            loadFlow(props.flowId);\r\n        }\r\n        else if (paths.length > 2) {\r\n            if (paths[1] == \"ui\") {\r\n                const flowId = paths[2];\r\n                if (flowId !== undefined) {\r\n                    loadFlow(flowId);\r\n                }\r\n                else {\r\n                    console.error(\"No flowId specified\");\r\n                }\r\n            }\r\n        }\r\n        return () => {\r\n            unmounted.current = true;\r\n            props.flowrunnerConnector.unregisterNodeStateObserver(\"canvas\");\r\n        };\r\n    }, []);\r\n    const setupFlow = (flowPackage, flowId) => {\r\n        setTimeout(() => {\r\n            if (flowPackage.flowType === \"playground\") {\r\n                props.flowrunnerConnector.setFlowType(flowPackage.flowType || \"playground\");\r\n                canvasMode.setFlowrunnerPaused(false);\r\n                canvasMode.setFlowType(flowPackage.flowType || \"playground\");\r\n                flow.storeFlow(flowPackage.flow, flowId);\r\n                layout.storeLayout(JSON.stringify(flowPackage.layout));\r\n                let flowHash = {};\r\n                flowPackage.flow.map((node) => {\r\n                    flowHash[node.name] = node;\r\n                    return true;\r\n                });\r\n                setFlowName(flowPackage.name);\r\n                setFlowHash(flowHash);\r\n                setIsFlowLoaded(true);\r\n            }\r\n        }, 500);\r\n    };\r\n    const loadFlow = (flowId) => {\r\n        var _a;\r\n        if (props.flowrunnerConnector.hasStorageProvider) {\r\n            const flowPackage = (_a = props.flowrunnerConnector.storageProvider) === null || _a === void 0 ? void 0 : _a.getFlow(flowId);\r\n            setupFlow(flowPackage, flowId);\r\n            return;\r\n        }\r\n        cross_fetch__WEBPACK_IMPORTED_MODULE_5___default()('/flowui?flow=' + flowId)\r\n            .then(res => {\r\n            if (res.status >= 400) {\r\n                throw new Error(\"Bad response from server\");\r\n            }\r\n            return res.json();\r\n        })\r\n            .then(flowPackage => {\r\n            setupFlow(flowPackage, flowId);\r\n        })\r\n            .catch(err => {\r\n            console.error(err);\r\n        });\r\n    };\r\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\r\n        layoutTreeAsString.current = JSON.parse(layout.layout) || {};\r\n        setLayoutTree(getLayoutNodeFromTree(1, 0, 0));\r\n        updateTouchedNodes();\r\n    }, [layout, flow]);\r\n    const updateTouchedNodes = () => {\r\n        if (touchedNodesLocal.current) {\r\n            Object.keys(touchedNodesLocal.current).map((touchNodeId) => {\r\n                const element = document.getElementById(touchNodeId);\r\n                if (element) {\r\n                    if (touchedNodesLocal.current[touchNodeId] === true) {\r\n                        element.classList.remove(\"untouched\");\r\n                    }\r\n                    else {\r\n                        element.classList.add(\"untouched\");\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    };\r\n    const nodeStateObserver = (nodeName, nodeState, touchedNodes) => {\r\n        nodesStateLocal.current[nodeName] = nodeState;\r\n        touchedNodesLocal.current = touchedNodes;\r\n        updateTouchedNodes();\r\n    };\r\n    if (!isFlowLoaded) {\r\n        return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null);\r\n    }\r\n    let title = flowName || \"UserInterface View\";\r\n    if (titleBarTitle !== \"\") {\r\n        title = titleBarTitle;\r\n    }\r\n    let style = {};\r\n    let navContainerClassName = \"mb-4\";\r\n    let navbarClassName = \"navbar navbar-expand-lg navbar-light\";\r\n    let h1ClassName = \"text-black\";\r\n    if (titleBarBackgroundcolor) {\r\n        style.backgroundColor = titleBarBackgroundcolor;\r\n        navContainerClassName = \"mb-4\";\r\n        navbarClassName = \"navbar navbar-expand-lg navbar-light\";\r\n    }\r\n    if (titleBarColor) {\r\n        style.color = titleBarColor;\r\n        h1ClassName = \"\";\r\n    }\r\n    if (titleBarFont) {\r\n        style.fontFamily = titleBarFont;\r\n    }\r\n    if (titleBarFontSize) {\r\n        style.fontSize = titleBarFontSize;\r\n    }\r\n    if (titleBarFontWeight) {\r\n        style.fontWeight = titleBarFontWeight;\r\n    }\r\n    return react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"pb-4 container__background\" },\r\n        react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { style: style, className: navContainerClassName },\r\n            react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"nav\", { style: style, className: navbarClassName },\r\n                react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"h1\", { className: h1ClassName }, title))),\r\n        react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"container container__ui-view\" },\r\n            react__WEBPACK_IMPORTED_MODULE_0__.createElement(_devhelpr_layoutrunner__WEBPACK_IMPORTED_MODULE_2__.Layout, { nodeName: \"ui\", renderLayoutType: _components_layout_renderer__WEBPACK_IMPORTED_MODULE_3__.renderLayoutType, payload: {\r\n                    layout: layoutTree,\r\n                    context: {\r\n                        flowHash: flowHash,\r\n                        flow: flow.flow,\r\n                        getNodeInstance: props.getNodeInstance,\r\n                        flowrunnerConnector: props.flowrunnerConnector,\r\n                        renderHtmlNode: props.renderHtmlNode\r\n                    }\r\n                } })),\r\n        react__WEBPACK_IMPORTED_MODULE_0__.createElement(_flow__WEBPACK_IMPORTED_MODULE_4__.Flow, { flow: flow.flow, flowId: flow.flowId, flowrunnerConnector: props.flowrunnerConnector }));\r\n};\r\n\n\n//# sourceURL=webpack://@devhelpr/flowrunner-canvas/./src/components/userinterface-view/multi-form-view.tsx?");

/***/ }),

/***/ "./src/helpers/shape-settings.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ShapeSettings\": () => (/* binding */ ShapeSettings)\n/* harmony export */ });\n/* harmony import */ var _components_canvas_shapes_shape_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./src/components/canvas/shapes/shape-types.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./src/config.ts\");\n\r\n\r\nclass ShapeSettings {\r\n    static getShapeSettings(taskType, node) {\r\n        let settings = {\r\n            strokeColor: '#000000',\r\n            fillColor: _components_canvas_shapes_shape_types__WEBPACK_IMPORTED_MODULE_0__.shapeBackgroundColor,\r\n            fillSelectedColor: _components_canvas_shapes_shape_types__WEBPACK_IMPORTED_MODULE_0__.shapeSelectedBackgroundColor,\r\n            textColor: '#000000',\r\n            cornerRadius: 0,\r\n            isSkewed: false,\r\n            hasUI: false,\r\n        };\r\n        const taskTypeConfig = (0,_config__WEBPACK_IMPORTED_MODULE_1__.getTaskConfigForTask)(taskType);\r\n        if (taskTypeConfig) {\r\n            let variableSettings = {};\r\n            if (node && !!node.hasVariableAttached) {\r\n                variableSettings = taskTypeConfig['_variable'];\r\n            }\r\n            if (node && node.objectSchema && taskTypeConfig[node.objectSchema]) {\r\n                settings = {\r\n                    ...settings,\r\n                    ...taskTypeConfig,\r\n                    ...variableSettings,\r\n                    ...taskTypeConfig[node.objectSchema],\r\n                };\r\n            }\r\n            else {\r\n                settings = { ...settings, ...taskTypeConfig, ...variableSettings };\r\n            }\r\n        }\r\n        return settings;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://@devhelpr/flowrunner-canvas/./src/helpers/shape-settings.ts?");

/***/ })

}]);
[{"id":"Tixypixels","x":-331.42450315249897,"y":562.9136603518032,"shapeType":"Rect","name":"Tixypixels","taskType":"DebugTask","htmlPlugin":"debugNode","visualizer":"animatedgridcanvas","propertyName":"","format":"toFixed","fixed":2,"decimalSeparator":",","afterLabel":"","flowId":"1219010f-cc09-406c-b952-435274ec8faa","columns":16,"rows":16,"mode":"pixels","width":512,"height":512},{"id":"ScriptTask1","x":-1044.9757166509085,"y":612.2050270737328,"shapeType":"Rect","name":"ScriptTask1","taskType":"ScriptTask","outputProperty":"script","rows":10,"script":"// TODO: implement \"foreachpixel\"\ninput slider;\ninput slider2;\ninput colorfactor;\ninput range;\ninput colorfade;\n\nfunction_i32 mapvalue(min,max,valuerangemin, valuerangemax,value) {\n   let_i32 maxmin = 0;\n   maxmin = max-min;\t \n   let_i32 valuemaxmin = 0;\n   valuemaxmin = valuerangemax- \n   valuerangemin;\n   let multiplier = 0;\n   multiplier = (\n      convert_signed_i32_to_f32(maxmin)\n\t)/(\n\t\tconvert_signed_i32_to_f32(valuemaxmin)\n\t);\n\t/*\n\t\t0..255 0..383\n\t*/\n\tlet result = 0;\n         result = \n          convert_signed_i32_to_f32(value) \n          * multiplier;\n\treturn trunc_signed_f32_to_i32(result);\n}\n\nfunction_i32 getaddress(xx,yy,maxwidth) {\n  return_i32 yy*maxwidth*4+xx*4;\n}\nfunction distance(xx,yy,xa,ya) {\n  return sqrt(\n   (xx-xa)*(xx-xa) + \n   (yy-ya)*(yy-ya)\n  );\n}\nfunction_i32 \n  setpixel(address,value,valuex,valuey) {\n    store(address,value,valuex,valuey);\n    return_i32 0;\n}\n\nfunction_i32 \n  setpixelcolor(address,value) {\n    storeHex(address,value);\n    return_i32 0;\n}\n\nfunction hypot(a,b) { \n  return sqrt(a*a+b*b);\n}\nfunction helper(xt,yt,sc,cc) {\n   return hypot(xt-sc,yt-cc)*0.25;\n}\nlet_i32 loopx = 0;\nlet_i32 loopy = 0;\nlet_i32 address = 0;\n\nlet help = 0;\n\nlet xf = 0;\nlet yf = 0;\n\nlet tf = 0;\nlet tf2 = 0;\nlet tf3 = 0;\nlet tf4 = 0;\nlet tf5 = 0;\nlet tf6 = 0;\n\nlet sliderhelper = 0;\nsliderhelper = slider * 2.0;\n\nlet sliderhelper2 = 0;\nsliderhelper2 = slider2 * 2.0;\n\ntf = (width/2)+\n    sin((time/500)*2)*sliderhelper;\ntf3 = (height/2)+\n   sin(0.7+(time/500)*1.2)*sliderhelper;\n\ntf2 = (width/2)+\n     sin((time/750)*0.8)*sliderhelper2;\ntf4 = (height/2)+\n     sin(0.7+(time/750)*1.6)*sliderhelper2;\n\ntf5 = (width/2)+\n     sin(0.35+(time/750)*1.5)*sliderhelper2;\ntf6 = (height/2)+\n     sin(1.05+(time/750)*1.8)*sliderhelper2;\n\nlet colorfactorhelper = 0;\ncolorfactorhelper = colorfactor * 2.55;\n\nlet rangehelper = 0;\nrangehelper = range * 2.55;\n\nlet_i32 maxloopheight = 0;\nlet_i32 maxloopwidth = 0;\nmaxloopheight= trunc_signed_f32_to_i32(height);\nmaxloopwidth= trunc_signed_f32_to_i32(width);\n\nwhile_i32 (loopy<maxloopheight) {\n  loopx = 0;\n  while_i32 (loopx < maxloopwidth) {\n    address = getaddress(loopx,loopy,maxloopwidth);\n    \n    yf = convert_signed_i32_to_f32(loopy);\n    xf = convert_signed_i32_to_f32(loopx);\n\n    help = 256-\n       helper(xf,yf,tf,tf3)*\n       helper(xf,yf,tf2,tf4)*\n       helper(xf,yf,tf5,tf6)\n       /128;\n\n    if (help < 0) {\n      help = 0;\n    }\n    if (help > 255) {\n      help = 255;\n    }\n    if (help > (255-rangehelper)) {\n      setpixel(\n        address, \n        trunc_signed_f32_to_i32(help),\n      trunc_signed_f32_to_i32(colorfactorhelper),\n        0\n      ); \n    } else {\n// send this as i64?\n// format is bgr\n//setpixelcolor(address, 0xff0000);\n      setpixel(\n        address, \n        0,\n        mapvalue(0,255,0,maxloopheight,\n          loopy),\n        mapvalue(0,255,0,maxloopwidth,\n          loopx)\n      );\n       \n    }\n\n    loopx = loopx + 1;\n  }\n  loopy = loopy + 1;\n}\nreturn 0;","width":500,"htmlPlugin":"formNode"},{"name":"connection-dc34d180-5099-4b15-a225-6b7daf2461f5","taskType":"connection","shapeType":"Line","startshapeid":"ScriptTask1","endshapeid":"Tixypixels","xstart":-544.9757166509085,"ystart":664.2050270737328,"xend":-339.42450315249897,"yend":614.9136603518032,"thumbPosition":0},{"id":"FormTask","x":-1566.0558791398787,"y":614.5522350128723,"shapeType":"Rect","name":"FormTask","taskType":"FormTask","metaInfo":[{"fieldType":"slider","fieldName":"slider","defaultValue":20},{"fieldName":"slider2","fieldType":"slider","defaultValue":80},{"fieldName":"colorfactor","fieldType":"slider","defaultValue":100},{"fieldName":"range","fieldType":"slider","defaultValue":50},{"fieldName":"colorfade","fieldType":"slider","defaultValue":50}]},{"name":"connection-d1ed879b-3e89-48c3-8487-e17c935cdc67","taskType":"connection","shapeType":"Line","startshapeid":"FormTask","endshapeid":"ScriptTask1","xstart":-1266.0558791398787,"ystart":666.5522350128723,"xend":-1052.9757166509085,"yend":664.2050270737328,"thumbPosition":0}]